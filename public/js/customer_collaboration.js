/*! For license information please see customer_collaboration.js.LICENSE.txt */
"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[8305],{88262:(t,e,a)=>{a.d(e,{Ds:()=>o,HE:()=>s});a(70749);var s=function(t){return""==t?null:(window.detectChanges=!0,t)},o=function(t,e){var a=null;return function(){clearTimeout(a);var s=arguments,o=this;a=setTimeout((function(){t.apply(o,s)}),e)}}},45921:(t,e,a)=>{a.d(e,{Z:()=>r});var s=a(1519),o=a.n(s)()((function(t){return t[1]}));o.push([t.id,".btn[data-v-f5cbf17e]:active,.btn[data-v-f5cbf17e]:focus{box-shadow:none;outline:none!important}input[data-v-f5cbf17e]:focus,textarea[data-v-f5cbf17e]:focus{outline:none}.margin-bottom-zero label[data-v-f5cbf17e]{margin-bottom:0}.div-border[data-v-f5cbf17e]{border:1px solid #686868!important}.customMarginUploaded[data-v-f5cbf17e]{margin:1px .5rem!important}.customMarginUploadedFirst[data-v-f5cbf17e]{margin:.9rem .5rem 0!important}.line-height[data-v-f5cbf17e]{line-height:1}.row-width-media[data-v-f5cbf17e]{width:100%}.hideEmailSection[data-v-f5cbf17e]{display:none!important}.showEmailSection[data-v-f5cbf17e]{display:flex!important}.div-column-display[data-v-f5cbf17e]{display:flex}input[data-v-f5cbf17e]{font-size:.75rem}.product-table-row-width[data-v-f5cbf17e]{width:100%}.showHide-div-large[data-v-f5cbf17e]{display:block}.showHide-div-mobile[data-v-f5cbf17e]{display:none}.border[data-v-f5cbf17e]{border:1px solid #c4c4c4!important}.border-radius[data-v-f5cbf17e]{border-radius:.2rem}.task-table-heading[data-v-f5cbf17e]{font-size:12px;font-weight:400}.span-visibilty-none[data-v-f5cbf17e]{visibility:hidden}@media (max-width:576px){.row-width-media[data-v-f5cbf17e]{width:auto}.div-column-display[data-v-f5cbf17e]{display:block}.product-table-row-width[data-v-f5cbf17e]{width:109%}.showHide-div-large[data-v-f5cbf17e]{display:none}.showHide-div-mobile[data-v-f5cbf17e]{display:block}}",""]);const r=o},21670:(t,e,a)=>{a.d(e,{Z:()=>r});var s=a(1519),o=a.n(s)()((function(t){return t[1]}));o.push([t.id,".button-background-color[data-v-2147b46e]{background:#58a8ff!important}",""]);const r=o},93819:(t,e,a)=>{a.d(e,{Z:()=>r});var s=a(1519),o=a.n(s)()((function(t){return t[1]}));o.push([t.id,".toolbar[data-v-60a5c393]{display:flex;margin:0 1rem}",""]);const r=o},58580:(t,e,a)=>{a.r(e),a.d(e,{default:()=>x});var s=a(61999),o=a(59380);function r(t,e){var a="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!a){if(Array.isArray(t)||(a=function(t,e){if(!t)return;if("string"==typeof t)return n(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);"Object"===a&&t.constructor&&(a=t.constructor.name);if("Map"===a||"Set"===a)return Array.from(t);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return n(t,e)}(t))||e&&t&&"number"==typeof t.length){a&&(t=a);var s=0,o=function(){};return{s:o,n:function(){return s>=t.length?{done:!0}:{done:!1,value:t[s++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,i=!0,l=!1;return{s:function(){a=a.call(t)},n:function(){var t=a.next();return i=t.done,t},e:function(t){l=!0,r=t},f:function(){try{i||null==a.return||a.return()}finally{if(l)throw r}}}}function n(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,s=new Array(e);a<e;a++)s[a]=t[a];return s}const i={name:"ProductTable",props:{productsTableFields:{},id:{type:Number,default:null}},data:function(){return{axiosParams:{module:"customerCollaboration"}}},computed:{orderProduct:function(){var t=this,e=this.$store.state[this.axiosParams.module].recordList.find((function(e){return e.id==t.id}));if(e&&e.order.products)return this.$store.getters.changedCompositePrice(e.order.products),this.showCompositeProductDetails(e.order.products),e.order.products}},methods:{changeNumberFormat:function(t){return this.$store.getters.changeNumberFormat(t)},showCompositeProductDetails:function(t){var e,a=r(t);try{for(a.s();!(e=a.n()).done;){var s=e.value;s.iscompositeDetails=!1,s.composite&&s.composite.length>0&&s.composite[0].composite_products&&s.composite[0].composite_products.length>0&&(s.iscompositeDetails=!0)}}catch(t){a.e(t)}finally{a.f()}}}};var l=a(51900);const c=(0,l.Z)(i,(function(){var t=this,e=t._self._c;return e("b-table",{attrs:{fields:t.productsTableFields,items:t.orderProduct,bordered:"",responsive:"md","show-empty":"",small:""},scopedSlots:t._u([{key:"empty",fn:function(e){return[t._v("\n        No Record\n    ")]}},{key:"cell(product_number)",fn:function(a){return[a.item.non_stock_product&&a.item.non_stock_product.length>0?[e("label",{staticClass:"d-flex justify-content-center product-table"},[t._v(t._s(a.item.non_stock_product[0].product_number))])]:t._e(),t._v(" "),a.item.monument&&a.item.monument.length>0?[e("label",{staticClass:"d-flex justify-content-center product-table"},[t._v(t._s(a.item.monument[0].product_number))])]:t._e(),t._v(" "),a.item.service&&a.item.service.length>0?[e("label",{staticClass:"d-flex justify-content-center product-table"},[t._v(t._s(a.item.service[0].product_number))])]:t._e(),t._v(" "),a.item.simple&&a.item.simple.length>0?[e("label",{staticClass:"d-flex justify-content-center product-table"},[t._v(t._s(a.item.simple[0].product_number))])]:t._e(),t._v(" "),a.item.composite&&a.item.composite.length>0?[e("label",{staticClass:"d-flex justify-content-center product-table"},[t._v(t._s(a.item.composite[0].product_number))])]:t._e()]}},{key:"cell(item_name)",fn:function(a){return[a.item.non_stock_product&&a.item.non_stock_product.length>0?[e("label",{staticClass:"d-flex justify-content-center product-table"},[t._v(t._s(a.item.non_stock_product[0].item_name))])]:t._e(),t._v(" "),a.item.monument&&a.item.monument.length>0?[e("label",{staticClass:"d-flex justify-content-center product-table"},[t._v(t._s(a.item.monument[0].item_name))])]:t._e(),t._v(" "),a.item.service&&a.item.service.length>0?[e("label",{staticClass:"d-flex justify-content-center product-table"},[t._v(t._s(a.item.service[0].item_name))])]:t._e(),t._v(" "),a.item.simple&&a.item.simple.length>0?[e("label",{staticClass:"d-flex justify-content-center product-table"},[t._v(t._s(a.item.simple[0].item_name))])]:t._e(),t._v(" "),a.item.composite&&a.item.composite.length>0?[e("label",{staticClass:"d-flex justify-content-center product-table"},[t._v(t._s(a.item.composite[0].item_name))])]:t._e()]}},{key:"cell(quantity)",fn:function(a){return[e("label",{staticClass:"d-flex product-table"},[t._v(" "+t._s(a.item.quantity))])]}},{key:"cell(client_price)",fn:function(a){return[a.item.non_stock_product&&a.item.non_stock_product.length>0?[e("label",{staticClass:"d-none"},[t._v(t._s(a.item.client_price>a.item.price?a.item.client_price:a.item.client_price=a.item.price))]),t._v(" "),e("label",{staticClass:"text-nowrap"},[t._v("$ "+t._s(t.changeNumberFormat(a.item.client_price)?t.changeNumberFormat(a.item.client_price):"0.00"))])]:[e("label",{staticClass:"text-nowrap"},[t._v("$ "+t._s(t.changeNumberFormat(a.item.client_price)?t.changeNumberFormat(a.item.client_price):"0.00"))])]]}},{key:"cell(amount)",fn:function(a){return[e("label",{staticClass:"d-none"},[t._v("$ "+t._s(a.item.amount=Math.abs(a.item.quantity*a.item.client_price).toFixed(2)))]),t._v(" "),e("label",{staticClass:"text-nowrap"},[t._v("$ "+t._s(t.changeNumberFormat(a.item.amount)?t.changeNumberFormat(a.item.amount):"0.00"))]),t._v(" "),e("input",{attrs:{disabled:"",name:"amount",type:"hidden"},domProps:{value:a.item.amount}})]}},{key:"cell(installation_price)",fn:function(a){return[e("label",{staticClass:"text-nowrap"},[t._v("$ "+t._s(t.changeNumberFormat(a.item.installation_price)?t.changeNumberFormat(a.item.installation_price):"0.00"))])]}},{key:"cell(installation_amount)",fn:function(a){return[e("label",{staticClass:"d-none"},[t._v("$ "+t._s(Math.abs(a.item.quantity*a.item.installation_price).toFixed(2)))]),t._v(" "),e("label",{staticClass:"text-nowrap"},[t._v("$ "+t._s(t.changeNumberFormat(a.item.quantity*a.item.installation_price)?t.changeNumberFormat(a.item.quantity*a.item.installation_price):"0.00"))])]}},{key:"cell(total)",fn:function(a){return[e("label",{staticClass:"d-none"},[t._v("$ "+t._s(a.item.total=Math.abs(+a.item.amount+parseFloat(""==a.item.installation_price?0:a.item.quantity*a.item.installation_price)).toFixed(2)))]),t._v(" "),e("label",{staticClass:"text-nowrap"},[t._v("$ "+t._s(t.changeNumberFormat(a.item.total)?t.changeNumberFormat(a.item.total):"0.00"))]),t._v(" "),e("input",{attrs:{disabled:"",name:"total",type:"hidden"},domProps:{value:a.item.total}})]}},{key:"cell(showProducts)",fn:function(a){return[a.item.iscompositeDetails?e("b-button",{staticClass:"btn btn-sm btn-info order-form-btn py-1 mx-1",attrs:{size:"sm"},on:{click:a.toggleDetails}},[t._v("\n            "+t._s(a.detailsShowing?"Hide":"Show")+"\n        ")]):t._e()]}},{key:"row-details",fn:function(a){return[e("b-card",{attrs:{"no-body":""}},[e("table",{staticClass:"table table-sm table-striped table-bordered my-2"},[e("thead",{staticClass:"custom-table-header"},[e("tr",[e("th",[t._v("Product #")]),t._v(" "),e("th",[t._v("Product Name")]),t._v(" "),e("th",[t._v("Qty")]),t._v(" "),e("th",[t._v("Price")]),t._v(" "),e("th",[t._v("Amount")]),t._v(" "),e("th",[t._v("Install Price")]),t._v(" "),e("th",[t._v("Install Amount")])])]),t._v(" "),e("tbody",{staticClass:"custom-table-body"},t._l(a.item.composite[0].composite_products,(function(s,o){return e("tr",[e("td",[s.monument&&s.monument.length>0?[e("label",{staticClass:"d-flex justify-content-center product-table"},[t._v(t._s(s.monument[0].product_number))])]:t._e(),t._v(" "),s.service&&s.service.length>0?[e("label",{staticClass:"d-flex justify-content-center product-table"},[t._v(t._s(s.service[0].product_number))])]:t._e(),t._v(" "),s.simple&&s.simple.length>0?[e("label",{staticClass:"d-flex justify-content-center product-table"},[t._v(t._s(s.simple[0].product_number))])]:t._e()],2),t._v(" "),e("td",[s.monument&&s.monument.length>0?[e("label",{staticClass:"d-flex justify-content-center product-table"},[t._v(t._s(s.monument[0].item_name))])]:t._e(),t._v(" "),s.service&&s.service.length>0?[e("label",{staticClass:"d-flex justify-content-center product-table"},[t._v(t._s(s.service[0].item_name))])]:t._e(),t._v(" "),s.simple&&s.simple.length>0?[e("label",{staticClass:"d-flex justify-content-center product-table"},[t._v(t._s(s.simple[0].item_name))])]:t._e()],2),t._v(" "),e("td",[e("label",{staticClass:"d-flex justify-content-center product-table"},[t._v(t._s(a.item.quantity*s.quantity))])]),t._v(" "),e("td",[s.monument&&s.monument.length>0?[e("label",{staticClass:"d-flex justify-content-center text-nowrap"},[t._v("$ "+t._s(t.changeNumberFormat(s.monument[0].override_selling_price)?t.changeNumberFormat(s.monument[0].override_selling_price):"0.00"))])]:t._e(),t._v(" "),s.service&&s.service.length>0?[e("label",{staticClass:"d-flex justify-content-center text-nowrap"},[t._v("$ "+t._s(t.changeNumberFormat(s.service[0].override_selling_price)?t.changeNumberFormat(s.service[0].override_selling_price):"0.00"))])]:t._e(),t._v(" "),s.simple&&s.simple.length>0?[e("label",{staticClass:"d-flex justify-content-center text-nowrap"},[t._v("$ "+t._s(t.changeNumberFormat(s.simple[0].override_selling_price)?t.changeNumberFormat(s.simple[0].override_selling_price):"0.00"))])]:t._e()],2),t._v(" "),e("td",[s.monument&&s.monument.length>0?[e("label",{staticClass:"d-flex justify-content-center text-nowrap"},[t._v("$ "+t._s(t.changeNumberFormat(a.item.quantity*s.quantity*s.monument[0].override_selling_price)?t.changeNumberFormat(a.item.quantity*s.quantity*s.monument[0].override_selling_price):"0.00"))])]:t._e(),t._v(" "),s.service&&s.service.length>0?[e("label",{staticClass:"d-flex justify-content-center text-nowrap"},[t._v("$ "+t._s(t.changeNumberFormat(a.item.quantity*s.quantity*s.service[0].override_selling_price)?t.changeNumberFormat(a.item.quantity*s.quantity*s.service[0].override_selling_price):"0.00"))])]:t._e(),t._v(" "),s.simple&&s.simple.length>0?[e("label",{staticClass:"d-flex justify-content-center text-nowrap"},[t._v("$ "+t._s(t.changeNumberFormat(a.item.quantity*s.quantity*s.simple[0].override_selling_price)?t.changeNumberFormat(a.item.quantity*s.quantity*s.simple[0].override_selling_price):"0.00"))])]:t._e()],2),t._v(" "),e("td",[e("label",{staticClass:"d-flex justify-content-center text-nowrap"},[t._v("$ "+t._s(t.changeNumberFormat(s.installation_price)?t.changeNumberFormat(s.installation_price):"0.00"))])]),t._v(" "),e("td",[e("label",{staticClass:"d-flex justify-content-center text-nowrap"},[t._v("$ "+t._s(t.changeNumberFormat(a.item.quantity*s.quantity*s.installation_price)?t.changeNumberFormat(a.item.quantity*s.quantity*s.installation_price):"0.00"))])])])})),0)])])]}}])})}),[],!1,null,"3b106efa",null).exports;var m=a(70749);a(88262);function d(t){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},d(t)}function u(){u=function(){return t};var t={},e=Object.prototype,a=e.hasOwnProperty,s="function"==typeof Symbol?Symbol:{},o=s.iterator||"@@iterator",r=s.asyncIterator||"@@asyncIterator",n=s.toStringTag||"@@toStringTag";function i(t,e,a){return Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{i({},"")}catch(t){i=function(t,e,a){return t[e]=a}}function l(t,e,a,s){var o=e&&e.prototype instanceof p?e:p,r=Object.create(o.prototype),n=new F(s||[]);return r._invoke=function(t,e,a){var s="suspendedStart";return function(o,r){if("executing"===s)throw new Error("Generator is already running");if("completed"===s){if("throw"===o)throw r;return P()}for(a.method=o,a.arg=r;;){var n=a.delegate;if(n){var i=w(n,a);if(i){if(i===m)continue;return i}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if("suspendedStart"===s)throw s="completed",a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);s="executing";var l=c(t,e,a);if("normal"===l.type){if(s=a.done?"completed":"suspendedYield",l.arg===m)continue;return{value:l.arg,done:a.done}}"throw"===l.type&&(s="completed",a.method="throw",a.arg=l.arg)}}}(t,a,n),r}function c(t,e,a){try{return{type:"normal",arg:t.call(e,a)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var m={};function p(){}function v(){}function b(){}var f={};i(f,o,(function(){return this}));var _=Object.getPrototypeOf,h=_&&_(_(j([])));h&&h!==e&&a.call(h,o)&&(f=h);var y=b.prototype=p.prototype=Object.create(f);function g(t){["next","throw","return"].forEach((function(e){i(t,e,(function(t){return this._invoke(e,t)}))}))}function C(t,e){function s(o,r,n,i){var l=c(t[o],t,r);if("throw"!==l.type){var m=l.arg,u=m.value;return u&&"object"==d(u)&&a.call(u,"__await")?e.resolve(u.__await).then((function(t){s("next",t,n,i)}),(function(t){s("throw",t,n,i)})):e.resolve(u).then((function(t){m.value=t,n(m)}),(function(t){return s("throw",t,n,i)}))}i(l.arg)}var o;this._invoke=function(t,a){function r(){return new e((function(e,o){s(t,a,e,o)}))}return o=o?o.then(r,r):r()}}function w(t,e){var a=t.iterator[e.method];if(void 0===a){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return m;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return m}var s=c(a,t.iterator,e.arg);if("throw"===s.type)return e.method="throw",e.arg=s.arg,e.delegate=null,m;var o=s.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,m):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,m)}function x(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function k(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function F(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(x,this),this.reset(!0)}function j(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var s=-1,r=function e(){for(;++s<t.length;)if(a.call(t,s))return e.value=t[s],e.done=!1,e;return e.value=void 0,e.done=!0,e};return r.next=r}}return{next:P}}function P(){return{value:void 0,done:!0}}return v.prototype=b,i(y,"constructor",b),i(b,"constructor",v),v.displayName=i(b,n,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===v||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,i(t,n,"GeneratorFunction")),t.prototype=Object.create(y),t},t.awrap=function(t){return{__await:t}},g(C.prototype),i(C.prototype,r,(function(){return this})),t.AsyncIterator=C,t.async=function(e,a,s,o,r){void 0===r&&(r=Promise);var n=new C(l(e,a,s,o),r);return t.isGeneratorFunction(a)?n:n.next().then((function(t){return t.done?t.value:n.next()}))},g(y),i(y,n,"Generator"),i(y,o,(function(){return this})),i(y,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var a in t)e.push(a);return e.reverse(),function a(){for(;e.length;){var s=e.pop();if(s in t)return a.value=s,a.done=!1,a}return a.done=!0,a}},t.values=j,F.prototype={constructor:F,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(k),!t)for(var e in this)"t"===e.charAt(0)&&a.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function s(a,s){return n.type="throw",n.arg=t,e.next=a,s&&(e.method="next",e.arg=void 0),!!s}for(var o=this.tryEntries.length-1;o>=0;--o){var r=this.tryEntries[o],n=r.completion;if("root"===r.tryLoc)return s("end");if(r.tryLoc<=this.prev){var i=a.call(r,"catchLoc"),l=a.call(r,"finallyLoc");if(i&&l){if(this.prev<r.catchLoc)return s(r.catchLoc,!0);if(this.prev<r.finallyLoc)return s(r.finallyLoc)}else if(i){if(this.prev<r.catchLoc)return s(r.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<r.finallyLoc)return s(r.finallyLoc)}}}},abrupt:function(t,e){for(var s=this.tryEntries.length-1;s>=0;--s){var o=this.tryEntries[s];if(o.tryLoc<=this.prev&&a.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var r=o;break}}r&&("break"===t||"continue"===t)&&r.tryLoc<=e&&e<=r.finallyLoc&&(r=null);var n=r?r.completion:{};return n.type=t,n.arg=e,r?(this.method="next",this.next=r.finallyLoc,m):this.complete(n)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var a=this.tryEntries[e];if(a.finallyLoc===t)return this.complete(a.completion,a.afterLoc),k(a),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var a=this.tryEntries[e];if(a.tryLoc===t){var s=a.completion;if("throw"===s.type){var o=s.arg;k(a)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,a){return this.delegate={iterator:j(t),resultName:e,nextLoc:a},"next"===this.method&&(this.arg=void 0),m}},t}function p(t,e,a,s,o,r,n){try{var i=t[r](n),l=i.value}catch(t){return void a(t)}i.done?e(l):Promise.resolve(l).then(s,o)}function v(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,s)}return a}function b(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function f(t,e){var a="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!a){if(Array.isArray(t)||(a=function(t,e){if(!t)return;if("string"==typeof t)return _(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);"Object"===a&&t.constructor&&(a=t.constructor.name);if("Map"===a||"Set"===a)return Array.from(t);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return _(t,e)}(t))||e&&t&&"number"==typeof t.length){a&&(t=a);var s=0,o=function(){};return{s:o,n:function(){return s>=t.length?{done:!0}:{done:!1,value:t[s++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,n=!0,i=!1;return{s:function(){a=a.call(t)},n:function(){var t=a.next();return n=t.done,t},e:function(t){i=!0,r=t},f:function(){try{n||null==a.return||a.return()}finally{if(i)throw r}}}}function _(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,s=new Array(e);a<e;a++)s[a]=t[a];return s}const h={name:"Collaboration",props:{id:{type:Number},hideInModel:{type:Boolean,default:!0}},data:function(){return{formFields:{id:0,images:[]},visibleApprovals:!1,visibleAddCollaborator:!1,visibleNewCollaborator:!1,visibleCustomerView:!1,visibleEmail:!1,axiosParams:{module:"customerCollaboration"},axiosCollaborationParams:{module:"customerCollaboration/collaboration"},hideInModal:!1,selectedCollaboratorAdd:"all",selectedCollaboratorEmail:"all",collaboratorEmailFields:[{key:"date",label:"Date"},{key:"sent_by",label:"Sent By",class:"text-center text-nowrap"},{key:"send_to",label:"Send To",class:"text-center text-nowrap"},{key:"content",label:"Content"},{key:"attachment",label:"Attachment"}],productsTableFields:[{key:"product_number",label:"Product #",thClass:"text-center text-nowrap"},{key:"item_name",label:"Product Name",thClass:"text-center text-nowrap"},{key:"quantity",label:"Qty",thClass:"text-center"},{key:"client_price",label:"Client Price",thClass:"text-nowrap"},{key:"amount",label:"Amount"},{key:"installation_price",label:"Install"},{key:"installation_amount",label:"Install Amount",thClass:"text-nowrap"},{key:"total",label:"Total",class:"text-nowrap"},{key:"showProducts",label:"Details"}],taskCollaborationFields:[{key:"date",label:"Date",tdClass:"text-nowrap"},{key:"assigned_to",label:"Assigned To",thClass:"text-nowrap"},{key:"task",label:"Task",tdClass:"text-nowrap"},{key:"department_id",label:"Dept",tdClass:"text-nowrap"},{key:"created_by",label:"Created By",thClass:"text-nowrap",tdClass:"text-nowrap"},{key:"close_date",label:"Close Date",thClass:"text-nowrap",tdClass:"text-nowrap"},{key:"status",label:"Task Status",thClass:"text-nowrap",tdClass:"text-nowrap"}]}},beforeCreate:function(){this.$store.getters.isPermitted({resource:"Customer Portal",action:"read"})||this.$router.push("/access-denied")},computed:{customerName:function(){return this.$store.getters.getUserName},collaborationImages:function(){var t,e={uploadedImages:[],needApprovalImages:[],approvedImages:[],customerImages:[]},a=f(this.formFields.images);try{for(a.s();!(t=a.n()).done;){var s=t.value;if(s.approved_at){var o=new Date(s.approved_at);s.custom_approved_at=o.toLocaleString("en-US",{day:"numeric",year:"numeric",month:"short",hour:"numeric",minute:"numeric",second:"numeric"})}if(s.created_at){var r=new Date(s.created_at);s.custom_created_at=r.toLocaleString("en-US",{day:"numeric",year:"numeric",month:"short",hour:"numeric",minute:"numeric",second:"numeric"})}"uploads"==s.status?e.uploadedImages.push(s):"need approval"==s.status?e.needApprovalImages.push(s):"approved"==s.status?e.approvedImages.push(s):"customers"==s.status&&e.customerImages.push(s)}}catch(t){a.e(t)}finally{a.f()}return e},order:function(){if(null==this.formFields.order&&(this.formFields.order={invoice:{},order_status:{},paper_location:{},company:{},family:{},products:[],collaboration:{tasks:[]},correspondence:{tasks:[]}}),this.formFields.order){var t=new Date(this.formFields.order.date);this.formFields.order.customDate=t.toLocaleString("en-US",{day:"numeric",year:"numeric",month:"long",hour:"numeric",minute:"numeric",second:"numeric"})}return this.formFields.order.collaboration.tasks.length>0&&this.getCurrentUserTask(this.formFields.order.collaboration.tasks),this.formFields.order}},components:{Toolbar:o.Z,Button:s.Z,ProductTable:c},mounted:function(){this.formFields.id=this.$props.id?this.$props.id:0,this.getCollaboration(this.formFields.id),this.getRecordList()},methods:{getCollaboration:function(t){var e=this;if(t){var a=Object.values(this.$store.state[this.axiosParams.module].recordList).find((function(e){return e.id==t}));null!=a?this.formFields=function(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?v(Object(a),!0).forEach((function(e){b(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):v(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}({},a):(this.axiosCollaborationParams.id=t,(0,m.JE)(this.axiosCollaborationParams,(function(t){e.formFields=t.data})))}},getCurrentUserTask:function(t){var e={is_custom:!0,collaboration_id:this.$props.id?this.$props.id:0,email:this.formFields.order.family.email,first_name:this.formFields.order.family.name_on_stone,last_name:"",phone:this.formFields.order.family.phone,type:{title:"Customer"}};-1===this.formFields.collaborators.findIndex((function(t){return t.is_custom}))&&this.formFields.collaborators.push(e);var a=this.formFields.collaborators;t=t.filter((function(e){var s=e.assigned_to,o=a.findIndex((function(t){return t.email==s}));if(-1!=o&&"Customer"==a[o].type.title)return t})),this.sortItemByDate(t),this.formFields.order.collaboration.tasks=t},getRecordList:function(){0==this.$store.state[this.axiosParams.module].recordList.length&&(this.axiosParams.methodName="collaborationInfo",this.$store.dispatch("getCustomerPortalInfo",this.axiosParams))},saveImage:function(t,e){(new FormData).append("data",JSON.stringify(t)),console.log("this will be done later because we need create permisiion in customer portal in this approval module and we have only read permission")},toggleIcon:function(t){return t?"fa fa-angle-down":"fa fa-angle-right"},imageToPrint:function(t){return"<html><head><script>function step1(){\nsetTimeout('step2()', 10);}\nfunction step2(){window.print();window.close();}\n<\/script></head><body onload='step1()'> <img src='"+t+"' style='width: 100vw;'>\n</body></html>"},printImage:function(t){var e=window.open("about:blank","_new");e.document.open(),e.document.write(this.imageToPrint(window.location.origin+"/"+t)),e.document.close()},downloadImage:function(t){t="/"+t;var e=document.createElement("a");e.href=t;var a={images:"",collaboration:"",_:""};t=t.replace(/images|_|collaboration/gi,(function(t){return a[t]})),e.download=t,document.body.appendChild(e),console.log(e),e.click(),document.body.removeChild(e)},moveFile:function(t){if(this.formFields.images.filter((function(e){return e==t.img}))[0].status=t.moveTo,"need approval"==t.moveTo){var e=this.$store.state.auth.user?this.$store.state.auth.user:null;t.img.moved_by=e.name,this.addTask("collaboration",t)}if("approved"==t.moveTo){t.img.user_id=this.$store.state.auth.user.id?this.$store.state.auth.user.id:null,t.img.user=this.$store.state.auth.user?this.$store.state.auth.user:null;var a=new Date,s=[a.getMonth(),a.getDate(),a.getFullYear()],o=s[0],r=s[1],n=s[2],i=[a.getHours(),a.getMinutes(),a.getSeconds()],l=i[0],c=i[1],m=i[2];t.img.approved_at="".concat(n,"-").concat(o,"-").concat(r," ").concat(l,":").concat(c,":").concat(m)}"customers"==t.moveTo&&(this.customer_message="File has been moved to customer view section",this.customer_image=t.img.path,this.customer_image_name=t.img.name,this.sendCustomerViewMail()),this.saveImage(t.img,!1)},changeDateFormat:function(t){return this.$store.getters.changeDateFormat(t)},customizeLabel:function(t){if(t){var e,a=t.split("_");for(e=0;e<a.length;e++)a[e]=a[e].charAt(0).toUpperCase()+a[e].slice(1);return a.join(" ")}},sortItemByDate:function(t){return(e=u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.sort((function(t,e){return new Date(t.date)-new Date(e.date)}));case 2:case"end":return e.stop()}}),e)})),function(){var t=this,a=arguments;return new Promise((function(s,o){var r=e.apply(t,a);function n(t){p(r,s,o,n,i,"next",t)}function i(t){p(r,s,o,n,i,"throw",t)}n(void 0)}))})();var e}}};var y=a(93379),g=a.n(y),C=a(45921),w={insert:"head",singleton:!1};g()(C.Z,w);C.Z.locals;const x=(0,l.Z)(h,(function(){var t=this,e=t._self._c;return e("div",[e("h5",{staticClass:"mx-2 my-1 custom-view-heading"},[t._v("Customer Portal")]),t._v(" "),e("div",{staticClass:"bg-toolbar my-2 p-1"},[e("Toolbar",{attrs:{customerName:t.customerName}})],1),t._v(" "),e("div",[e("Button",{attrs:{collaboration:!0}})],1),t._v(" "),e("hr",{staticClass:"my-3"}),t._v(" "),e("b-form",{staticClass:"div-shadow bg-white rounded mx-2 mb-2",attrs:{inline:""}},[e("div",{staticClass:"d-flex justify-content-center title-style col-md-12 my-2"},[t._v("\n            COLLABORATION\n        ")]),t._v(" "),e("label",{staticClass:"mr-sm-2 ml-2",attrs:{for:"inline-form-input-order_status"}},[t._v("Order Status")]),t._v(" "),e("b-form-input",{staticClass:"mb-2 mr-sm-2 mb-sm-0 col-md-1 mx-1",attrs:{id:"inline-form-input-order_status",size:"sm",value:null!=t.order.order_status?t.customizeLabel(t.order.order_status.title):"",readonly:""}}),t._v(" "),e("label",{staticClass:"mr-sm-2 ml-2",attrs:{for:"inline-form-input-paper_location"}},[t._v("Paper Location")]),t._v(" "),e("b-form-input",{staticClass:"mb-2 mr-sm-2 mb-sm-0 col-md-3 mx-1",attrs:{id:"inline-form-input-paper_location",size:"sm",value:null!=t.order.paper_location?t.customizeLabel(t.order.paper_location.title):"",readonly:""}}),t._v(" "),e("label",{staticClass:"mr-sm-2 ml-2",attrs:{for:"inline-form-input-order_on_hand"}},[t._v("Order On Hold")]),t._v(" "),e("b-form-input",{staticClass:"mb-2 mr-sm-2 mb-sm-0 col-md-1 mx-1",attrs:{id:"inline-form-input-order_on_hand",size:"sm",value:t.order.on_hold,readonly:""}}),t._v(" "),e("label",{staticClass:"mr-sm-2 ml-2",attrs:{for:"inline-form-input-description"}},[t._v("Order On Hold Description")]),t._v(" "),e("b-form-input",{staticClass:"mb-2 mr-sm-2 mb-sm-0 col-md-3 mx-1",attrs:{id:"inline-form-input-description",size:"sm",value:t.order.on_hold_description,readonly:""}}),t._v(" "),e("div",{staticClass:"row row-width-media mt-2"},[e("div",{staticClass:"col-md-6 px-4"},[e("div",{staticClass:"div-shadow bg-white rounded"},[e("div",{},[e("div",{staticClass:"bg-toolbar mt-4 px-3"},[e("b-form-group",{staticClass:"mb-0 custom-radio-and-checkbox",attrs:{disabled:t.hideInModal}},[e("b-form-radio-group",{model:{value:t.selectedCollaboratorAdd,callback:function(e){t.selectedCollaboratorAdd=e},expression:"selectedCollaboratorAdd"}},[e("b-form-radio",{attrs:{value:"all"}},[t._v("Show All")]),t._v(" "),e("b-form-radio",{attrs:{value:"customer"}},[t._v("Customer")]),t._v(" "),e("b-form-radio",{attrs:{value:"production"}},[t._v("Production")]),t._v(" "),e("b-form-radio",{attrs:{value:"cemetery"}},[t._v("Cemetery")]),t._v(" "),e("b-form-radio",{attrs:{value:"vendor"}},[t._v("Vendors")]),t._v(" "),e("b-form-radio",{attrs:{value:"design"}},[t._v("Design")])],1)],1)],1),t._v(" "),e("div",{staticClass:"flex-column",attrs:{height:"1850px"}},[e("div",{staticClass:"justify-content-center height-200",class:t.visibleAddCollaborator?"showEmailSection":"hideEmailSection"},[e("h2",{staticClass:"mt-5"},[t._v("E-mails")])]),t._v(" "),e("div",{staticClass:"mt-2 mx-2",class:t.visibleAddCollaborator?"hideEmailSection":"showEmailSection"},[e("b-table",{staticClass:"small",attrs:{responsive:"",bordered:"",small:"",items:t.formFields.collaborator_mail,fields:t.collaboratorEmailFields},scopedSlots:t._u([{key:"cell(date)",fn:function(a){return[[e("label",{staticClass:"d-flex collaborator-mail-sent-table"},[t._v(t._s(t.changeDateFormat(a.item.date)))])]]}},{key:"cell(sent_by)",fn:function(a){return[e("label",{staticClass:"d-flex collaborator-mail-sent-table"},[t._v(t._s(a.item.sent_by))])]}},{key:"cell(send_to)",fn:function(a){return[e("label",{staticClass:"d-flex collaborator-mail-sent-table"},[t._v(t._s(a.item.send_to))])]}},{key:"cell(content)",fn:function(a){return[e("label",{staticClass:"d-flex collaborator-mail-sent-table mail-content-white-space"},[t._v(t._s(a.item.content))])]}},{key:"cell(attachment)",fn:function(a){return[e("label",{staticClass:"d-flex collaborator-mail-sent-table"},[t._v(" "+t._s(1==a.item.attachment?"Yes":"No"))])]}}])})],1)])])])]),t._v(" "),e("div",{staticClass:"col-md-6"},[e("div",{staticClass:"row mt-2"},[e("div",{staticClass:"col-md-6"},[e("h6",{staticClass:"m-0 custom-form-heading ml-2"},[t._v("Order Form")])]),t._v(" "),e("div",{staticClass:"col-md-6 px-4 div-column-display"},[e("label",{staticClass:"mr-sm-2 text-nowrap",attrs:{for:"inline-form-input-date_promised"}},[t._v("Date Promised")]),t._v(" "),e("b-form-input",{staticClass:"mb-2 mr-sm-2 mb-sm-0 w-100",attrs:{id:"inline-form-input-date_promised",size:"sm",value:t.order.invoice.date_promised=t.changeDateFormat(t.order.invoice.date_promised),readonly:""}})],1)]),t._v(" "),e("div",{staticClass:"row mt-2"},[e("div",{staticClass:"col-md-12 px-4 div-column-display"},[e("label",{staticClass:"mr-sm-2 text-nowrap",attrs:{for:"inline-form-input-order-date"}},[t._v("Order Date")]),t._v(" "),e("b-form-input",{staticClass:"mb-2 mr-sm-2 mb-sm-0 w-100",attrs:{id:"inline-form-input-order-date",size:"sm",value:t.changeDateFormat(t.order.date),readonly:""}}),t._v(" "),e("label",{staticClass:"mr-sm-2 text-nowrap",attrs:{for:"inline-form-input-invoice"}},[t._v("Invoice #")]),t._v(" "),e("b-form-input",{staticClass:"mb-2 mr-sm-2 mb-sm-0 w-15",attrs:{id:"inline-form-input-invoice",size:"sm",value:t.order.invoice.invoice_number,readonly:""}}),t._v(" "),e("label",{staticClass:"mr-sm-2 text-nowrap",attrs:{for:"inline-form-input-email"}},[t._v("Email")]),t._v(" "),e("b-form-input",{staticClass:"mb-2 mr-sm-2 mb-sm-0 w-100",attrs:{id:"inline-form-input-email",size:"sm",value:t.order.family.email,readonly:""}})],1)]),t._v(" "),e("div",{staticClass:"row mt-4"},[e("div",{staticClass:"col-md-12"},[e("h6",{staticClass:"m-0 custom-form-heading ml-2"},[t._v("Store Location Info.")])])]),t._v(" "),e("div",{staticClass:"row mt-2"},[e("div",{staticClass:"col-md-12 px-4 div-column-display"},[e("label",{staticClass:"mr-sm-2 text-nowrap",attrs:{for:"inline-form-input-stores"}},[t._v("Stores")]),t._v(" "),e("b-form-input",{staticClass:"mb-2 mr-sm-2 mb-sm-0 w-100",attrs:{id:"inline-form-input-stores",size:"sm",value:t.order.company.name,readonly:""}}),t._v(" "),e("label",{staticClass:"mr-sm-2 text-nowrap",attrs:{for:"inline-form-input-sale-person"}},[t._v("Salesperson")]),t._v(" "),e("b-form-input",{staticClass:"mb-2 mr-sm-2 mb-sm-0 w-100",attrs:{id:"inline-form-input-sale-person",size:"sm",value:t.order.sales_person,readonly:""}})],1)]),t._v(" "),e("div",{staticClass:"row mt-4"},[e("div",{staticClass:"col-md-12"},[e("h6",{staticClass:"m-0 custom-form-heading ml-2"},[t._v("Family Information")])])]),t._v(" "),e("div",{staticClass:"row mt-2"},[e("div",{staticClass:"col-md-12 px-4 div-column-display"},[e("label",{staticClass:"mr-sm-2 text-nowrap",attrs:{for:"inline-form-input-last-name-stone"}},[t._v("Last Name On Stone")]),t._v(" "),e("b-form-input",{staticClass:"mb-2 mr-sm-2 mb-sm-0 w-100",attrs:{id:"inline-form-input-last-name-stone",size:"sm",value:t.order.family.name_on_stone,readonly:""}}),t._v(" "),e("label",{staticClass:"mr-sm-2 text-nowrap",attrs:{for:"inline-form-input-customer-contact"}},[t._v("Customer Contact")]),t._v(" "),e("b-form-input",{staticClass:"mb-2 mr-sm-2 mb-sm-0 w-15",attrs:{id:"inline-form-input-customer-contact",size:"sm",value:t.order.family.contact,readonly:""}}),t._v(" "),e("label",{staticClass:"mr-sm-2 text-nowrap",attrs:{for:"inline-form-input-phone"}},[t._v("Phone")]),t._v(" "),e("b-form-input",{staticClass:"mb-2 mr-sm-2 mb-sm-0 w-15",attrs:{id:"inline-form-input-phone",size:"sm",value:t.order.family.phone,readonly:""}})],1)]),t._v(" "),e("div",{staticClass:"row mt-2 showHide-div-large"},[e("div",{staticClass:"col-md-12 px-4"},[e("ProductTable",{attrs:{productsTableFields:t.productsTableFields,id:t.formFields.id}})],1)])])]),t._v(" "),e("div",{staticClass:"row mt-2 product-table-row-width showHide-div-mobile"},[e("div",{staticClass:"col-md-6"}),t._v(" "),e("div",{staticClass:"col-md-6"},[e("div",{staticClass:"row mt-2 px-2"},[e("div",{staticClass:"col-md-12"},[e("ProductTable",{attrs:{productsTableFields:t.productsTableFields,id:t.formFields.id}})],1)])])]),t._v(" "),e("div",{staticClass:"row row-width-media mt-2"},[e("div",{staticClass:"col-md-1 px-4 mb-1"},[e("label",{staticClass:"justify-content-lg-start"},[t._v("Approvals")])]),t._v(" "),e("div",{staticClass:"col-md-5 px-4 mb-1"},[e("b-button",{class:t.visibleApprovals?"btn btn-sm bg-white text-dark  text-left border w-100":"w-100 btn btn-sm  bg-white text-dark text-left border collapsed",attrs:{"aria-expanded":t.visibleApprovals?"true":"false","aria-controls":"collapse-approval"},on:{click:function(e){t.visibleApprovals=!t.visibleApprovals}}},[e("i",{class:t.toggleIcon(t.visibleApprovals)}),t._v(" Click here to open or close the\n                    approval section\n                ")]),t._v(" "),e("b-collapse",{attrs:{id:"collapse-approval"},model:{value:t.visibleApprovals,callback:function(e){t.visibleApprovals=e},expression:"visibleApprovals"}},[e("div",{staticClass:"flex-grow-1 border rounded bg-white"},[e("div",{staticClass:"px-1 pb-1"},[t._l(t.collaborationImages.needApprovalImages,(function(a,s){return e("div",{staticClass:"p-0 my-2 py-1 div-border"},[e("div",[e("div",{staticClass:"flex-column flex-grow-1 text-center d-flex margin-bottom-zero"},[e("label",{staticClass:"font-weight-bold"},[t._v("Unviewed by customer")]),t._v(" "),e("label",{staticClass:"text-info"},[t._v("Email "+t._s(0==a.sent_mail?"not sent":"sent")+"  to collaborator(s)")]),t._v(" "),e("label",{staticClass:"text-info"},[t._v("Moved by "+t._s(a.moved_by))])])]),t._v(" "),e("div",[e("div",{staticClass:"mx-2"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-4"},[e("img",{staticClass:"h-100 w-100 mx-1 border p-1 rounded my-1 custom-image",attrs:{src:"/".concat(a.path)}})]),t._v(" "),e("div",{staticClass:"mt-1 col-md-4 line-height"},[e("label",{staticClass:"font-weight-bold custom-label customMarginUploadedFirst"},[t._v(t._s(a.name.length>20?a.name.substring(0,20)+"...":a.name))]),t._v(" "),e("label",{staticClass:"text-info custom-label customMarginUploaded"},[t._v(t._s(a.size))]),t._v(" "),e("label",{staticClass:"text-info custom-label customMarginUploaded"},[t._v(t._s(a.custom_created_at))]),t._v(" "),e("label",{staticClass:"custom-label customMarginUploaded"},[t._v(t._s(a.uploaded_by))]),t._v(" "),e("div",[e("button",{staticClass:"btn btn-sm my-1 bg-white",attrs:{type:"button"},on:{click:function(e){return t.printImage(a.path),!1}}},[e("i",{staticClass:"fa fa-print fa-lg"})]),t._v(" "),e("button",{staticClass:"btn btn-sm my-1 bg-white ml-n2",attrs:{type:"button"},on:{click:function(e){return t.downloadImage(a.path)}}},[e("i",{staticClass:"fa fa-arrow-circle-down fa-lg"})])])]),t._v(" "),e("div",{staticClass:"col-md-4"},["need approval"==a.status?e("div",{},[e("button",{staticClass:"btn-info w-100 my-1 custom-infobtn-toolbar custom-infobtn-text",attrs:{type:"button"},on:{click:function(e){return t.moveFile({moveTo:"approved",img:a})}}},[t._v("Accept as Customer")]),t._v(" "),e("button",{staticClass:"btn-info w-100 my-1 custom-infobtn-toolbar custom-infobtn-text",attrs:{type:"button"},on:{click:function(t){}}},[t._v("Reject as Customer")])]):t._e()])]),t._v(" "),e("div",{staticClass:"flex-wrap"},[t.hideInModal?t._e():e("div",{staticClass:"flex-column"},[e("label",{staticClass:"font-weight-bold"},[t._v("Rendering notes for customer:")]),t._v(" "),a.notes?e("label",{staticClass:"custom-label customMarginUploaded"},[t._v(t._s(a.notes))]):t._e()])])])])])})),t._v(" "),t._l(t.collaborationImages.approvedImages,(function(a,s){return e("div",{staticClass:"p-0 my-2 py-1 div-border"},[e("div",[e("div",{staticClass:"flex-column flex-grow-1 text-center d-flex margin-bottom-zero"},[e("label",{staticClass:"font-weight-bold text-primary"},[t._v("Approved by "+t._s(a.user?a.user.name:t.username))]),t._v(" "),e("label",{staticClass:"text-info"},[t._v("Admin note:")]),t._v(" "),e("label",{staticClass:"text-info"},[t._v(t._s(a.custom_approved_at))]),t._v(" "),e("label",[t._v("Acknowledged by "+t._s(a.user?a.user.name:t.username)+"  @ "+t._s(a.custom_approved_at))]),t._v(" "),"Customer"==a.user.role.title?e("label",{staticClass:"font-weight-bold"},[t._v("Accepted by Customer")]):t._e()])]),t._v(" "),e("div",[e("div",{staticClass:"flex-column mx-2"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-4"},[e("img",{staticClass:"h-100 w-100 mx-1 border p-1 rounded my-1 custom-image",attrs:{src:"/".concat(a.path)}})]),t._v(" "),e("div",{staticClass:"flex-column mt-1 col-md-4 line-height"},[e("label",{staticClass:"font-weight-bold custom-label customMarginUploadedFirst"},[t._v(t._s(a.name.length>20?a.name.substring(0,20)+"...":a.name))]),t._v(" "),e("label",{staticClass:"text-info custom-label customMarginUploaded"},[t._v(t._s(a.size))]),t._v(" "),e("label",{staticClass:"text-info custom-label customMarginUploaded"},[t._v(t._s(a.custom_created_at))]),t._v(" "),e("label",{staticClass:"custom-label customMarginUploaded"},[t._v(t._s(a.uploaded_by))]),t._v(" "),e("div",[e("button",{staticClass:"btn btn-sm my-1 bg-white",attrs:{type:"button"},on:{click:function(e){return t.printImage(a.path),!1}}},[e("i",{staticClass:"fa fa-print fa-lg"})]),t._v(" "),e("button",{staticClass:"btn btn-sm my-1 bg-white ml-n2",attrs:{type:"button"},on:{click:function(e){return t.downloadImage(a.path)}}},[e("i",{staticClass:"fa fa-arrow-circle-down fa-lg"})])])]),t._v(" "),e("div",{staticClass:"flex-column my-auto col-md-4"},["Customer"!=a.user.role.title?e("button",{staticClass:"btn-info w-100 my-1 custom-infobtn-toolbar custom-infobtn-text",attrs:{type:"button"},on:{click:function(e){return t.moveFile({moveTo:"need approval",img:a})}}},[t._v("Reject as Customer")]):t._e()])]),t._v(" "),e("div",{staticClass:"flex-column"},[t.hideInModal?t._e():e("div",{staticClass:"flex-column flex-wrap"},[e("label",{staticClass:"font-weight-bold"},[t._v("Rendering notes for customer:")]),t._v(" "),a.notes?e("label",{staticClass:"custom-label customMarginUploaded"},[t._v(t._s(a.notes))]):t._e()])])])])])}))],2)])])],1),t._v(" "),e("div",{staticClass:"col-md-6"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-12"},[e("h6",{staticClass:"m-0 custom-form-heading ml-2"},[t._v("Notes")])])]),t._v(" "),e("div",{staticClass:"row mt-2"},[e("div",{staticClass:"col-md-12 px-4"},[e("b-form-textarea",{staticClass:"w-100",attrs:{disabled:"",rows:"3",size:"sm","no-resize":""},model:{value:t.formFields.notes,callback:function(e){t.$set(t.formFields,"notes",e)},expression:"formFields.notes"}})],1)])])]),t._v(" "),e("div",{staticClass:"row row-width-media mt-2"},[e("div",{staticClass:"col-md-1 px-4 mb-1"},[e("label",{staticClass:"justify-content-lg-start text-nowrap"},[t._v("Customer View")])]),t._v(" "),e("div",{staticClass:"col-md-5 px-4 mb-1"},[e("b-button",{class:t.visibleCustomerView?"btn btn-sm bg-white text-dark text-left border w-100":"w-100 btn btn-sm bg-white text-dark text-left border collapsed",attrs:{"aria-expanded":t.visibleCustomerView?"true":"false","aria-controls":"collapse-customer-view"},on:{click:function(e){t.visibleCustomerView=!t.visibleCustomerView}}},[e("i",{class:t.toggleIcon(t.visibleCustomerView)}),t._v(" Click here to open or close\n                    customer view section\n                ")]),t._v(" "),e("b-collapse",{attrs:{id:"collapse-customer-view"},model:{value:t.visibleCustomerView,callback:function(e){t.visibleCustomerView=e},expression:"visibleCustomerView"}},[e("div",{staticClass:"flex-grow-1 border rounded bg-white px-0"},[e("div",{staticClass:"px-1 pb-1"},t._l(t.collaborationImages.customerImages,(function(a,s){return e("div",{staticClass:"p-0 my-2 div-border py-2"},[e("div",{staticClass:"mx-2"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-4"},[e("img",{staticClass:"h-100 w-100 mx-1 border p-1 rounded my-1 custom-image",attrs:{src:"/".concat(a.path)}})]),t._v(" "),e("div",{staticClass:"mt-1 col-md-4 line-height"},[e("label",{staticClass:"font-weight-bold custom-label"},[t._v(t._s(a.name.length>20?a.name.substring(0,20)+"...":a.name))]),t._v(" "),e("label",{staticClass:"text-info custom-label"},[t._v(t._s(a.size))]),t._v(" "),e("label",{staticClass:"text-info custom-label"},[t._v(t._s(a.custom_created_at))]),t._v(" "),e("div",[e("button",{staticClass:"btn btn-sm my-1 bg-white",attrs:{type:"button"},on:{click:function(e){return t.printImage(a.path),!1}}},[e("i",{staticClass:"fa fa-print fa-lg"})]),t._v(" "),e("button",{staticClass:"btn btn-sm my-1 bg-white ml-n2",attrs:{type:"button"},on:{click:function(e){return t.downloadImage(a.path)}}},[e("i",{staticClass:"fa fa-arrow-circle-down fa-lg"})])])]),t._v(" "),e("div",{staticClass:"col-md-4"},[e("button",{staticClass:"btn-info mx-1 my-1 custom-infobtn-toolbar custom-infobtn-text mt-5 w-100",attrs:{type:"button"},on:{click:function(e){return t.deleteFile(a)}}},[t._v("Remove File")])])])])])})),0)])])],1)]),t._v(" "),e("div",{staticClass:"row mt-2 d-block ml-0 div-shadow w-100 rounded pb-2"},[e("div",{staticClass:"col-md-12 ml-n2"},[e("h6",{staticClass:"my-2 custom-form-heading"},[t._v("Task Collaboration")])]),t._v(" "),t.hideInModal?t._e():e("div",{staticClass:"col-md-12 row-width-media bg-primary"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-12"},[e("button",{staticClass:"btn btn-sm list-toolbar m-1 border-0",attrs:{type:"button"}},[t._v("Add Task\n                            ")]),t._v(" "),e("button",{staticClass:"btn btn-sm list-toolbar m-1 border-0",attrs:{type:"button"}},[t._v("\n                                Delete Task\n                            ")])])])]),t._v(" "),e("div",{staticClass:"col-md-12"},[e("div",{staticClass:"row"},[e("b-table",{staticClass:"table-font-size",attrs:{small:"",responsive:"",borderless:"","thead-class":"",items:t.order.collaboration.tasks,fields:t.taskCollaborationFields,"show-empty":""},scopedSlots:t._u([{key:"empty",fn:function(e){return[t._v("\n                                No Record\n                            ")]}},{key:"head(date)",fn:function(a){return[e("span",{staticClass:"task-table-heading"},[t._v(t._s(a.label))])]}},{key:"head(assigned_to)",fn:function(a){return[e("span",{staticClass:"task-table-heading"},[t._v(t._s(a.label))])]}},{key:"head(task)",fn:function(a){return[e("span",{staticClass:"task-table-heading"},[t._v(t._s(a.label))])]}},{key:"head(department_id)",fn:function(a){return[e("span",{staticClass:"task-table-heading"},[t._v(t._s(a.label))])]}},{key:"head(created_by)",fn:function(a){return[e("span",{staticClass:"task-table-heading"},[t._v(t._s(a.label))])]}},{key:"head(close_date)",fn:function(a){return[e("span",{staticClass:"task-table-heading"},[t._v(t._s(a.label))])]}},{key:"head(status)",fn:function(a){return[e("span",{staticClass:"task-table-heading"},[t._v(t._s(a.label))])]}},{key:"cell(date)",fn:function(a){return[e("label",{staticClass:"justify-content-lg-start w-100 border border-radius product-table"},[a.item.date?e("span",{staticClass:"ml-1 mr-1 p-1"},[t._v(t._s(t.changeDateFormat(a.item.date)))]):e("span",{staticClass:"ml-1 mr-1 p-1 span-visibilty-none"},[t._v("here")])])]}},{key:"cell(assigned_to)",fn:function(a){return[e("label",{staticClass:"justify-content-lg-start w-100 border border-radius product-table"},[a.item.assigned_to?e("span",{staticClass:"ml-1 mr-1 p-1"},[t._v(t._s(a.item.assigned_to))]):e("span",{staticClass:"ml-1 mr-1 p-1 span-visibilty-none"},[t._v("here")])])]}},{key:"cell(task)",fn:function(a){return[e("label",{staticClass:"justify-content-lg-start w-100 border border-radius product-table"},[a.item.task?e("span",{staticClass:"ml-1 mr-1 p-1"},[t._v(t._s(a.item.task))]):e("span",{staticClass:"ml-1 mr-1 p-1 span-visibilty-none"},[t._v("here")])])]}},{key:"cell(department_id)",fn:function(a){return[e("label",{staticClass:"justify-content-lg-start w-100 border border-radius product-table"},[a.item.department_id?e("span",{staticClass:"ml-1 mr-1 p-1"},[t._v(t._s(a.item.department_id?a.item.department.title:""))]):e("span",{staticClass:"ml-1 mr-1 p-1 span-visibilty-none"},[t._v("here")])])]}},{key:"cell(created_by)",fn:function(a){return[e("label",{staticClass:"justify-content-lg-start w-100 border border-radius product-table"},[a.item.created_by?e("span",{staticClass:"ml-1 mr-1 p-1"},[t._v(t._s(a.item.created_by))]):e("span",{staticClass:"ml-1 mr-1 p-1 span-visibilty-none"},[t._v("here")])])]}},{key:"cell(close_date)",fn:function(a){return[e("label",{staticClass:"justify-content-lg-start w-100 border border-radius product-table"},[a.item.close_date?e("span",{staticClass:"ml-1 mr-1 p-1"},[t._v(t._s(t.changeDateFormat(a.item.close_date)))]):e("span",{staticClass:"ml-1 mr-1 p-1 span-visibilty-none"},[t._v("here")])])]}},{key:"cell(status)",fn:function(a){return[e("label",{staticClass:"justify-content-lg-start w-100 border border-radius product-table"},[a.item.status?e("span",{staticClass:"ml-1 mr-1 p-1"},[t._v(t._s(t.customizeLabel(a.item.status)))]):e("span",{staticClass:"ml-1 mr-1 p-1 span-visibilty-none"},[t._v("here")])])]}}])})],1)])])],1)],1)}),[],!1,null,"f5cbf17e",null).exports},61999:(t,e,a)=>{a.d(e,{Z:()=>l});const s={name:"Button",props:{invoice:{type:Boolean,default:!1},orderStatus:{type:Boolean,default:!1},approval:{type:Boolean,default:!1},collaboration:{type:Boolean,default:!1}},data:function(){return{axiosParams:{module:"customerToolButton"}}},computed:{},methods:{}};var o=a(93379),r=a.n(o),n=a(21670),i={insert:"head",singleton:!1};r()(n.Z,i);n.Z.locals;const l=(0,a(51900).Z)(s,(function(){var t=this,e=t._self._c;return e("div",[e("div",{staticClass:"d-flex justify-content-center"},[e("div",{staticClass:"toolbar"},[e("router-link",{staticClass:"btn-info btn-sm mx-1 custom-dangerbtn-toolbar custom-infobtn-text py-2 text-decoration-none",class:t.invoice?"button-background-color":"",attrs:{to:"/invoice-list",exact:""}},[t._v("Invoice")]),t._v(" "),e("router-link",{staticClass:"btn-info btn-sm mx-1 custom-dangerbtn-toolbar custom-infobtn-text py-2 text-decoration-none",class:t.orderStatus?"button-background-color":"",attrs:{to:"/customer-order-status-list",exact:""}},[t._v("Order Status")]),t._v(" "),e("router-link",{staticClass:"btn-info btn-sm mx-1 custom-dangerbtn-toolbar custom-infobtn-text py-2 text-decoration-none",class:t.approval?"button-background-color":"",attrs:{to:"/customer-approval-list",exact:""}},[t._v("Approvals")]),t._v(" "),e("router-link",{staticClass:"btn-info btn-sm mx-1 custom-dangerbtn-toolbar custom-infobtn-text py-2 text-decoration-none",class:t.collaboration?"button-background-color":"",attrs:{to:"/customer-collaboration-list",exact:""}},[t._v("Collaboration")])],1)])])}),[],!1,null,"2147b46e",null).exports},59380:(t,e,a)=>{a.d(e,{Z:()=>l});const s={name:"Toolbar",props:{customerName:{type:String,default:null}},computed:{},data:function(){return{axiosParams:{module:"CustomerPortal"},searchTerm:""}},methods:{}};var o=a(93379),r=a.n(o),n=a(93819),i={insert:"head",singleton:!1};r()(n.Z,i);n.Z.locals;const l=(0,a(51900).Z)(s,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"d-flex align-items-center w-100"},[e("div",{staticClass:"toolbar d-flex ml-auto"},[t._v("\n        Welcome "+t._s(t.customerName)+"!\n    ")]),t._v(" "),t._m(0)])}),[function(){var t=this._self._c;return t("div",{staticClass:"toolbar ml-auto"},[t("div",{staticClass:"d-flex mt-1"},[t("img",{staticClass:"toolbar-image mx-1 mt-1",attrs:{src:"/images/video-chat.png",width:"26",height:"26"}}),this._v(" "),t("img",{staticClass:"toolbar-image mx-1",attrs:{src:"/images/help-icon.png",width:"30",height:"30"}})])])}],!1,null,"60a5c393",null).exports}}]);